<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ePhishient AI</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <button id="themeToggle" class="theme-toggle" title="Toggle Dark Mode">ðŸŒ™</button>
        <h1>Ephishient AI</h1>
        <p class="subtitle">Enter a URL to check if it is a phishing attack.</p>
        
        <div class="input-group">
            <input type="text" id="urlInput" placeholder="http://example.com">
            <div class="button-container">
                <button type="button" id="analyzeBtn" onclick="checkUrl()">Analyze</button>
                <button type="button" id="reanalyzeBtn" onclick="checkUrl()" class="btn-reanalyze" style="display: none;">Reanalyze</button>
                <button type="button" id="clearBtn" class="btn-clear" title="Clear URL" style="display: none;">Clear</button>
            </div>
        </div>

        <div id="result">
            <h3 id="statusText"></h3>
            <p><strong>Confidence:</strong> <span id="confidenceScore"></span></p>
            
            <!-- Gradient Chart -->
            <div class="risk-labels"><span>Safe</span><span>Suspicious</span><span>Malicious</span></div>
            <div class="risk-meter-container">
                <div id="riskMarker" class="risk-marker" style="left: 0%;">
                    <span id="riskTooltip" class="risk-tooltip">0%</span>
                </div>
            </div>

            <p><strong>Analysis:</strong></p>
            <ul id="reasonList" style="padding-left: 20px; margin-top: 5px;"></ul>
            
            <div class="action-buttons">
                <button id="shareBtn" class="btn-share">Share Result</button>
                <button onclick="retrainModel()" class="btn-retrain">Retrain AI Model</button>
            </div>
    </div>

    <!-- Share Options Modal -->
    <div id="shareModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeShareModal()">&times;</span>
            <h3>Share Analysis</h3>
            <div style="display: flex; flex-direction: column; gap: 10px; margin-top: 20px;">
                <button onclick="copyToClipboard()" class="btn-share">ðŸ“‹ Copy to Clipboard</button>
                <button onclick="downloadPDF()" class="btn-share" style="background-color: #e74c3c;" target="_blank">ðŸ“„ Download PDF</button>
            </div>
        </div>
    </div>

    
    <!-- Custom Modal -->
    <div id="customModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <p id="modalMessage"></p>
            <button onclick="closeModal()">Close</button>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmModal" class="modal">
        <div class="modal-content">
            <h3>Confirm Action</h3>
            <p id="confirmMessage"></p>
            <div style="display: flex; justify-content: center; gap: 10px; margin-top: 15px;">
                <button id="confirmYesBtn" class="btn-share" style="background-color: #2ecc71;">Yes</button>
                <button onclick="closeConfirmModal()" class="btn-share" style="background-color: #e74c3c;">No</button>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
